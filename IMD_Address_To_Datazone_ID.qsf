{"SurveyEntry":{"SurveyID":"SV_55YZK6eQz1XjWBf","SurveyName":"Address To DatazoneID With Ranks","SurveyDescription":null,"SurveyOwnerID":"UR_e4c576o9BUDsfJP","SurveyBrandID":"auckland","DivisionID":null,"SurveyLanguage":"EN","SurveyActiveResponseSet":"RS_4JBFfHZhjjC2Esd","SurveyStatus":"Inactive","SurveyStartDate":"0000-00-00 00:00:00","SurveyExpirationDate":"0000-00-00 00:00:00","SurveyCreationDate":"2018-02-12 13:04:57","CreatorID":"UR_e4c576o9BUDsfJP","LastModified":"2018-05-20 15:42:28","LastAccessed":"0000-00-00 00:00:00","LastActivated":"2018-02-12 13:06:57","Deleted":null},"SurveyElements":[{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"BL","PrimaryAttribute":"Survey Blocks","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"1":{"Type":"Trash","Description":"Trash \/ Unused Questions","ID":"BL_8HXBxkhdUHMsZLf","BlockElements":[{"Type":"Question","QuestionID":"QID1"},{"Type":"Question","QuestionID":"QID3"}]},"2":{"Type":"Standard","SubType":"","Description":"Block AddrToDatID With Embedded Data","ID":"BL_a4MMm0mKEdze4mx","BlockElements":[{"Type":"Question","QuestionID":"QID2"}]}}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"FL","PrimaryAttribute":"Survey Flow","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"Type":"Root","FlowID":"FL_1","Flow":[{"Type":"Standard","ID":"BL_a4MMm0mKEdze4mx","FlowID":"FL_3"},{"Type":"EmbeddedData","FlowID":"FL_5","EmbeddedData":[{"Description":"ImdRankD","Type":"Recipient","Field":"ImdRankD","VariableType":"String","DataVisibility":[]},{"Description":"EmpRankD","Type":"Recipient","Field":"EmpRankD","VariableType":"String","DataVisibility":[]},{"Description":"IncRankD","Type":"Recipient","Field":"IncRankD","VariableType":"String","DataVisibility":[]},{"Description":"CriRankD","Type":"Recipient","Field":"CriRankD","VariableType":"String","DataVisibility":[]},{"Description":"HouRankD","Type":"Recipient","Field":"HouRankD","VariableType":"String","DataVisibility":[]},{"Description":"HlthRankD","Type":"Recipient","Field":"HlthRankD","VariableType":"String","DataVisibility":[]},{"Description":"EduRankD","Type":"Recipient","Field":"EduRankD","VariableType":"String","DataVisibility":[]},{"Description":"AccRankD","Type":"Recipient","Field":"AccRankD","VariableType":"String","DataVisibility":[]}]}],"Properties":{"Count":5}}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"SO","PrimaryAttribute":"Survey Options","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"BackButton":"false","SaveAndContinue":"true","SurveyProtection":"PublicSurvey","BallotBoxStuffingPrevention":"false","NoIndex":"Yes","SecureResponseFiles":"true","SurveyExpiration":"None","SurveyTermination":"DefaultMessage","Header":"<script src=\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=AIzaSyBypdlGJUOXIlri7bqda7e15zfAfWVyHzA&libraries=places\" async defer><\/script>","Footer":"","ProgressBarDisplay":"None","PartialData":"+1 week","ValidationMessage":"","PreviousButton":" \u2190 ","NextButton":" \u2192 ","SkinLibrary":"auckland","SkinType":"MQ","Skin":"auckland2","NewScoring":1,"libraryId":"","nextButtonMid":"","previousButtonMid":"","headerMid":"","footerMid":"","QuestionsPerPage":"","PageTransition":"Fade","Autofocus":"false","Autoadvance":"false","AutoadvancePages":"false","ExternalCSS":null,"CustomStyles":{"errorStyles":{"selector":".Skin .ValidationError","styles":{"color":null,"backgroundColor":null,"borderColor":null}},"errorStylesBG":{"selector":".Skin .HeaderValidationError, .Skin .HeaderValidationError li a","styles":{"color":null,"backgroundColor":null}},"pageStyles":{"selector":"#SurveyEngineBody","styles":{"backgroundColor":null}},"textStyles":{"selector":".SkinInner","styles":{"fontFamily":null,"fontSize":null,"fontWeight":null,"fontStyle":null,"textDecoration":null,"color":null}},"questionStyles":{"selector":".Skin .QuestionText","styles":{"fontFamily":null,"fontSize":null,"fontWeight":null,"fontStyle":null,"textDecoration":null,"color":null}},"choiceStyles":{"selector":".Skin .horizontalbar th.ylabel, .Skin .Matrix table td, .Skin .Matrix table th, .Skin .Matrix table thead th, .Skin .Matrix table thead td, .Skin .PGR .DragAndDrop .Items label, .Skin .QuestionBody ul.ChoiceStructure, .Skin .PGR .DragAndDrop .Group ul, .Skin .PGR .DragAndDrop .Group h2, .Skin .PGR .DragAndDrop .Items ul, .Skin .PGR .DragAndDrop .Items h2, .Skin .DD .QuestionBody table.ChoiceStructure, .Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div ul, .Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div h2, .Skin .SBS thead th, .Skin .SBS td, .Skin .SBS .Answers td, .Skin .SBS .Answers th, .SBS table.ChoiceStructure, .Skin .horizontalbar thead table.LabelDescriptions tr td, .Skin .horizontalbar thead tr td.NotApplicable, .QuestionBody th, .Skin .QuestionBody .MC .MAVR label, .Skin .QuestionBody .MC .SAVR label, .Skin .SBS thead th, .Skin .SBS td, .Skin .RO .DND ul li, .Skin .reg, .SkinInner .ChoiceStructure, .Skin thead, .Skin .GAP .ChoiceStructure thead th, .Skin .GAP .ChoiceStructure .c4, .Skin .GAP .ChoiceStructure th, .Skin .GAP .ChoiceStructure .WhyText, .SkinInner .ChoiceStructure .LightBG, .Skin .QuestionOuter.Highlight .Inner .reg, .Skin .QuestionOuter.Highlight .Inner .alt, .Skin .QuestionOuter.Highlight .Inner .ReadableAlt       ","styles":{"fontFamily":null,"fontSize":null,"fontWeight":null,"fontStyle":null,"textDecoration":null,"color":null}},"headerStyles":{"selector":".Skin div#Header","styles":{"color":null}},"footerStyles":{"selector":".Skin #Footer","styles":{"color":null}},"questionSeparatorStyles":{"selector":".Skin .Separator","styles":{"backgroundColor":null,"display":null}},"highlightStyles":{"selector":".Skin .QuestionOuter.Highlight .Inner, .Skin .QuestionOuter.Highlight .Inner .reg, .Skin .QuestionOuter.Highlight .Inner .alt, .Skin .QuestionOuter.Highlight .Inner .ReadableAlt","styles":{"backgroundColor":null}},"highlightStylesAlt":{"selector":".Skin .QuestionOuter.Highlight .Inner .ReadableAlt, .Skin .QuestionOuter.Highlight .Inner .LightBG","styles":{"backgroundColor":null}},"textEntryStyles":{"selector":".Skin select, .Skin .InputText","styles":{"color":null}},"borderStyles":{"selector":".Skin .CS .horizontalbar table.sliderGrid tr.xlabel th, .Skin .CS .horizontalbar .ylabel, .Skin .CS .horizontalbar table.sliderGrid tr td.value, .Skin .Slider .horizontalbar table.sliderGrid tr.xlabel th, .Skin .BorderColor, .Skin .DarkBorderColor, .Skin .Slider .horizontalbar table.sliderGrid tr td.value, .Skin thead, .Skin .GAP .ChoiceStructure thead th  ","styles":{"borderColor":null}},"altRowStyles":{"selector":".Skin .ReadableAlt, .Skin .LightBG","styles":{"backgroundColor":null}},"customCSS":"\/* Place your CSS here *\/\n\/* Always set the map height explicitly to define the size of the div\n * element that contains the map. *\/\n#map {\n  height: 0%;\n  visibility: visible;\n}\n\n#description {\n  font-family: Roboto;\n  font-size: 15px;\n  font-weight: 300;\n}\n\n#infowindow-content {\n  display: none;\n}\n\n#map #infowindow-content {\n  display: inline;\n}\n\n.pac-card {\n  margin: 10px 10px 0 0;\n  border-radius: 2px 0 0 2px;\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  outline: none;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n  background-color: #fff;\n  font-family: Roboto;\n}\n\n#pac-container {\n  padding-bottom: 12px;\n  margin-right: 12px;\n}\n\n.pac-controls {\n  display: inline-block;\n  padding: 5px 11px;\n}\n\n.pac-controls label {\n  font-family: Roboto;\n  font-size: 13px;\n  font-weight: 300;\n}\n\n#pac-input {\n  background-color: #fff;\n  font-family: Roboto;\n  font-size: 15px;\n  font-weight: 300;\n  margin-left: 12px;\n  padding: 0 11px 0 13px;\n  text-overflow: ellipsis;\n  width: 400px;\n}\n\n#pac-input:focus {\n  border-color: #4d90fe;\n}"},"HighlightQuestions":"off"}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"SCO","PrimaryAttribute":"Scoring","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"ScoringCategories":[],"ScoringCategoryGroups":[],"ScoringSummaryCategory":null,"ScoringSummaryAfterQuestions":0,"ScoringSummaryAfterSurvey":0,"DefaultScoringCategory":null,"AutoScoringCategory":null}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"STAT","PrimaryAttribute":"Survey Statistics","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"MobileCompatible":true,"ID":"Survey Statistics"}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"PROJ","PrimaryAttribute":"CORE","SecondaryAttribute":"1.0.0","TertiaryAttribute":null,"Payload":null},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"QC","PrimaryAttribute":"Survey Question Count","SecondaryAttribute":"3","TertiaryAttribute":null,"Payload":null},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"SQ","PrimaryAttribute":"QID2","SecondaryAttribute":"AddressToDatazoneQ","TertiaryAttribute":null,"Payload":{"QuestionText":"Enter your address and convert to data zone ID for IMD deprivation information\n<div class=\"datazoneContainer\" style=\"display: inline-block; padding: 8px 15px;\"><button class=\"datazoneIDButton\" style=\"display: inline-block; background: rgb(0, 119, 204); padding: 8px 15px; color: rgb(255, 255, 255); width: 13em; font-family: sans-serif;\">Convert to DatazoneID<\/button>\n\n<p>&nbsp;<\/p>\n\n<div style=\"display: inline-block; padding: 15px 0px; font-size: 10pt;\">Want to know more?<\/div>\n\n<div class=\"linkToImd\" style=\"display: inline-block; padding: 8px; font-size: 10pt;\"><a href=\"https:\/\/imdmap.auckland.ac.nz\">Visit IMD Website<\/a><\/div>\n\n<p>&nbsp;<\/p>\n\n<div style=\"display: inline-block; padding: 0px; font-size: 10pt;\">Created by the <a href=\"https:\/\/cer.blogs.auckland.ac.nz\/\">Centre for eResearch, University of Auckland<\/a>.<\/div>\n<\/div>\n \n<div id=\"autoCompleteContainer\">\n <div class=\"pac-card\" id=\"pac-card\"><\/div>\n  <div id=\"pac-container\">\n    \n  <\/div>\n\n<div id=\"map\"><\/div>\n<div id=\"infowindow-content\">\n  <img src=\"\" width=\"16\" height=\"16\" id=\"place-icon\">\n  <span id=\"place-name\" class=\"title\"><\/span><br>\n  <span id=\"place-address\"><\/span>\n<\/div>\n\n<\/div>","QuestionJS":"\/\/create Qualtrics.SurveyEngine.QuestionData object\nQualtrics.SurveyEngine.addOnload(function ()\n{\n\t\n\tvar questContainer = this.getQuestionContainer ();\n\tconsole.log(questContainer);\n\t\n\tvar datazoneContainer = jQuery(questContainer).find(\".datazoneContainer\");\n\tvar questBody = jQuery(\".QuestionBody\");\n\t\n\tconsole.log(datazoneContainer);\n\t\n\tvar textField = jQuery(questContainer).find('.InputText');\n\ttextField.css(\"width\", \"30em\");\n\t\n\tjQuery(questContainer).append(datazoneContainer);\n\t\n\tvar autoCompleteContainer = document.getElementById('autoCompleteContainer');\n\t\n\tjQuery(questBody).append(autoCompleteContainer);\n\t\n\tvar pacContainer = document.getElementById('pac-container');\n\t\n\tjQuery(pacContainer).prepend(textField);\n\t\n\tjQuery(questContainer).find('.datazoneIDButton').on('click', function() {\n\t\t\n\t\taddress = jQuery(textField).val();\n\t\t\n\t\tvar url = \"https:\/\/imdmap.auckland.ac.nz\/datazoneID?address=\"+address;\n\t\t\n\t\tjQuery.get( url, function( data ) {\n\t\t\t\n\t\t\tvar datazoneID = data.datazoneID[0];\n\t\t\tconsole.log(datazoneID);\n\t\t\t\n\t\t\tjQuery(textField).val(datazoneID);\n\t\t\t\n\t\t\t\/\/Deprivation values as embedded data\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"ImdRankD\", data.ImdRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"EmpRankD\", data.EmpRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"IncRankD\", data.IncRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"CriRankD\", data.CriRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"HouRankD\", data.HouRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"HlthRankD\", data.HlthRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"EduRankD\", data.EduRankD[0]);\n\t\t\tQualtrics.SurveyEngine.setEmbeddedData(\"AccRankD\", data.AccRankD[0]);\n\t\t});\n\t\t\n\t});\n\t\n\n\t  var map = new google.maps.Map(document.getElementById('map'), {\n    center: {lat: -33.8688, lng: 151.2195},\n    zoom: 13\n  });\n  var card = document.getElementById('pac-card');\n  \/\/var input = document.getElementById('pac-input');\n\tvar input = textField[0];\n\n  var autocomplete = new google.maps.places.Autocomplete(input);\n\n  \/\/ Bind the map's bounds (viewport) property to the autocomplete object,\n  \/\/ so that the autocomplete requests use the current map bounds for the\n  \/\/ bounds option in the request.\n  \/\/autocomplete.bindTo('bounds', map);\n\n  var infowindow = new google.maps.InfoWindow();\n  var infowindowContent = document.getElementById('infowindow-content');\n  infowindow.setContent(infowindowContent);\n  var marker = new google.maps.Marker({\n    map: map,\n    anchorPoint: new google.maps.Point(0, -29)\n  });\n\n  autocomplete.addListener('place_changed', function() {\n    infowindow.close();\n    marker.setVisible(false);\n    var place = autocomplete.getPlace();\n    if (!place.geometry) {\n      \/\/ User entered the name of a Place that was not suggested and\n      \/\/ pressed the Enter key, or the Place Details request failed.\n      window.alert(\"No details available for input: '\" + place.name + \"'\");\n      return;\n    }\n\n    infowindowContent.children['place-icon'].src = place.icon;\n    infowindowContent.children['place-name'].textContent = place.name;\n  });\n\t\n\t\n});","DefaultChoices":false,"QuestionType":"TE","Selector":"SL","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"SpecifyLabel"},"QuestionDescription":"AddressToDatazoneQ","Validation":{"Settings":{"ForceResponse":"OFF","ForceResponseType":"ON","Type":"None","ValidDateType":"DateWithFormat","ValidPhoneType":"ValidUSPhone","ValidZipType":"ValidUSZip"}},"GradingData":[],"Language":[],"QuestionText_Unsafe":"Enter your address and convert to DatazoneID<div class=\"datazoneContainer\" style=\"display: inline-block; padding: 8px 15px;\"><button class=\"datazoneIDButton\" style=\"display: inline-block; background: rgb(0, 119, 204); padding: 8px 15px; color: rgb(255, 255, 255); width: 13em; font-family: sans-serif;\">Convert to DatazoneID<\/button><\/div>","DataExportTag":"Q2","QuestionID":"QID2"}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"SQ","PrimaryAttribute":"QID1","SecondaryAttribute":"Click to write the question text","TertiaryAttribute":null,"Payload":{"QuestionText":"Click to write the question text","DataExportTag":"Q1","QuestionType":"MC","Selector":"SAVR","SubSelector":"TX","Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"Click to write the question text","Choices":{"1":{"Display":"Click to write Choice 1"},"2":{"Display":"Click to write Choice 2"},"3":{"Display":"Click to write Choice 3"}},"ChoiceOrder":["1","2","3"],"Validation":{"Settings":{"ForceResponse":"OFF","ForceResponseType":"ON","Type":"None"}},"Language":[],"QuestionID":"QID1"}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"SQ","PrimaryAttribute":"QID3","SecondaryAttribute":"Click to write the question text","TertiaryAttribute":null,"Payload":{"QuestionText":"Click to write the question text","DataExportTag":"Q3","QuestionType":"MC","Selector":"SAVR","SubSelector":"TX","Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"Click to write the question text","Choices":{"1":{"Display":"Click to write Choice 1"},"2":{"Display":"Click to write Choice 2"},"3":{"Display":"Click to write Choice 3"}},"ChoiceOrder":["1","2","3"],"Validation":{"Settings":{"ForceResponse":"OFF","ForceResponseType":"ON","Type":"None"}},"Language":[],"QuestionID":"QID3"}},{"SurveyID":"SV_55YZK6eQz1XjWBf","Element":"RS","PrimaryAttribute":"RS_4JBFfHZhjjC2Esd","SecondaryAttribute":"Default Response Set","TertiaryAttribute":null,"Payload":null}]}
